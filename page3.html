<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶∏‡ßç‡¶¨‡¶∞‡ßç‡¶£‡ßá‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü‡¶∞</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Arial', sans-serif; background: #f3c623; text-align: center; padding: 15px; }
        .calculator {
            background: #ffffff; padding: 15px; width: 90%; max-width: 320px; margin: auto; border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        h2 { font-size: 20px; margin-bottom: 10px; border-bottom: 2px solid #f3c623; padding-bottom: 5px; color: #333; }
        input, button {
            width: 100%; padding: 8px; margin: 5px 0; border-radius: 6px; border: 1px solid #ddd; font-size: 14px;
        }
        button { background: #f3c623; color: white; cursor: pointer; border: none; font-weight: bold; }
        button:hover { background: #d4a317; }
        #result, #finalResult { margin-top: 10px; font-size: 16px; font-weight: bold; color: #333; }
    </style>
</head>
<body>
    <div class="calculator">
        <h2>‡¶∏‡ßç‡¶¨‡¶∞‡ßç‡¶£‡ßá‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü‡¶∞</h2>
        <input type="number" id="customValue" placeholder="‡¶∏‡ßç‡¶¨‡¶∞‡ßç‡¶£‡ßá‡¶∞ ‡¶¶‡¶æ‡¶Æ (‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶≠‡¶∞‡¶ø)" oninput="updateResults()">
        <input type="number" id="optionalValue" placeholder="‡¶Æ‡¶ú‡ßÅ‡¶∞‡¶ø (‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶≠‡¶∞‡¶ø)" oninput="calculateResults()">
        
        <input type="number" id="input1" placeholder="‡¶≠‡¶∞‡¶ø" min="0" oninput="calculateResults()">
        <input type="number" id="input2" placeholder="‡¶Ü‡¶®‡¶æ" min="0" oninput="calculateResults()">
        <input type="number" id="input3" placeholder="‡¶∞‡¶§‡ßç‡¶§‡¶ø" min="0" oninput="calculateResults()">
        <input type="number" id="input4" placeholder="‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü" min="0" oninput="calculateResults()">
        
        <button onclick="clearFields()">üóë ‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <button onclick="downloadReceipt()">üßæ ‡¶∞‡¶∏‡¶ø‡¶¶ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°</button>

        <div id="result"></div>
        <div id="finalResult">‡¶Æ‡ßã‡¶ü ‡¶ü‡¶æ‡¶ï‡¶æ= ‡ß≥‡ß¶</div>
    </div>

    <script>
        let result1 = 0, totalWage = 0, points = 0;

        function updateResults() {
            const customValue = parseFloat(document.getElementById("customValue").value) || 0;
            result1 = customValue / 960;
            calculateResults();
        }

        function calculateResults() {
            let input1 = parseFloat(document.getElementById('input1').value) || 0;
            let input2 = parseFloat(document.getElementById('input2').value) || 0;
            let input3 = parseFloat(document.getElementById('input3').value) || 0;
            let input4 = parseFloat(document.getElementById('input4').value) || 0;
            let optionalValue = parseFloat(document.getElementById('optionalValue').value) || 0;

            points = (input1 * 960) + (input2 * 60) + (input3 * 10) + input4;
            totalWage = (optionalValue / 960) * points;
            
            let finalVori = Math.floor(points / 960);
            let remainingPoints = points % 960;
            let finalAna = Math.floor(remainingPoints / 60);
            remainingPoints %= 60;
            let finalRotti = Math.floor(remainingPoints / 10);
            let finalPoint = remainingPoints % 10;
            let gramResult = (points / 960) * 11.66;
            
            document.getElementById("result").innerHTML = `üìè ‡¶ì‡¶ú‡¶®: ${finalVori} ‡¶≠‡¶∞‡¶ø, ${finalAna} ‡¶Ü‡¶®‡¶æ, ${finalRotti} ‡¶∞‡¶§‡ßç‡¶§‡¶ø, ${finalPoint} ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü | ‚ú® ${gramResult.toFixed(2)}g`;
            let finalResult = (result1 * points) + totalWage;
            document.getElementById("finalResult").innerText = `üü¢ ‡¶Æ‡ßã‡¶ü ‡¶ü‡¶æ‡¶ï‡¶æ= ‡ß≥${finalResult.toFixed(2)}`;
        }

        function clearFields() {
            if (confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                document.querySelectorAll('input').forEach(input => input.value = '');
                document.getElementById("result").innerHTML = "";
                document.getElementById("finalResult").innerText = '‡¶Æ‡ßã‡¶ü ‡¶ü‡¶æ‡¶ï‡¶æ= ‡ß≥‡ß¶';
            }
        }

        function downloadReceipt() {
            let customValue = parseFloat(document.getElementById("customValue").value) || 0;
            let optionalValue = parseFloat(document.getElementById("optionalValue").value) || 0;
            let currentDate = new Date().toLocaleString('bn-BD', { dateStyle: 'full', timeStyle: 'short' });

            let finalVori = Math.floor(points / 960);
            let remainingPoints = points % 960;
            let finalAna = Math.floor(remainingPoints / 60);
            remainingPoints %= 60;
            let finalRotti = Math.floor(remainingPoints / 10);
            let finalPoint = remainingPoints % 10;
            let gramResult = (points / 960) * 11.66;
            let finalResultText = document.getElementById('finalResult').innerText;

            let receiptContent = `üî∂ Charigram Gold Market üî∂
-----------------------------------
üìÖ ‡¶∞‡¶∏‡¶ø‡¶¶ ‡¶§‡ßà‡¶∞‡¶ø‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º: ${currentDate}
-----------------------------------
üí∞ ‡¶∏‡ßç‡¶¨‡¶∞‡ßç‡¶£‡ßá‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¶‡¶æ‡¶Æ: ‡ß≥${customValue} ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶≠‡¶∞‡¶ø
‡¶™‡¶∞‡¶ø‡¶£‡¶§ ‡¶Æ‡¶æ‡¶®: ${finalVori} ‡¶≠‡¶∞‡¶ø, ${finalAna} ‡¶Ü‡¶®‡¶æ, ${finalRotti} ‡¶∞‡¶§‡ßç‡¶§‡¶ø, ${finalPoint} ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü
‚ú® ‡¶ì‡¶ú‡¶®: ${gramResult.toFixed(2)}g
üî® ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶≠‡¶∞‡¶ø‡¶∞ ‡¶Æ‡¶ú‡ßÅ‡¶∞‡¶ø ‡¶π‡¶æ‡¶∞: ‡ß≥${optionalValue.toFixed(2)}
üíµ ‡¶Æ‡ßã‡¶ü ‡¶Æ‡¶ú‡ßÅ‡¶∞‡¶ø: ‡ß≥${totalWage.toFixed(2)}
-----------------------------------
${finalResultText}
-----------------------------------
‚úÖ ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶! Charigram Gold Market-‡¶è ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶∏‡¶¨‡ßá‡¶®!`;

            let blob = new Blob([receiptContent], { type: 'text/plain' });
            let link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `Gold_Calculator_Receipt_${new Date().getTime()}.txt`;
            link.click();
        }
    </script>
</body>
</html>